NOTE: As the SDK is still in development, the APIs might change drastically. As of now, you will need the clone the entire registry project and link the SDK in your project's `package.json`
```{
  "name": "zk-regex-registry-app",
  ...
  "dependencies": {
    ...
   "zk-regex-sdk": "link:<path to SDK>"
   }
```

## Getting started

**Google Client API key**
You will need a Google Oauth token if you want users to be able to directly query emails from their inbox. Go to Google Cloud's dashboard to enable the Gmail API.

**React Project**
The SDK currently only works with `reactjs`. If you are using `nextjs`,  you might need some workarounds to make sure the page you integrate the SDK runs fully on the client side. Refer to this for reference [example](/packages/app/src/app/try)

## Wiring it up

Surround a page with the ZkRegexProvider given by the SDK. If you are using `nextjs`, it is recommended that you only include this in a page that uses the SDK. Else, your entire application will need to be client-side rendered.

```
import { ZkRegexProvider } from 'zk-regex-sdk';

function TryPage(props: Props) {
  return (
    <ZkRegexProvider clientId={GOOGLE_CLIENT_ID} zkRegexRegistryUrl='https://registry-dev.zkregex.com'>
        <Page {...props}/>
    </ZkRegexProvider>
  );
};
```

In your page, the SDK exposes a few hooks to interact with the library.

```
export function Page(props: Props) {
    const {
        googleAuthToken,
        isGoogleAuthed,
        loggedInGmail,
        googleLogIn,
        googleLogOut,
    } = useGoogleAuth();

    const {
        createInputWorker,
        generateInputFromEmail,
        generateProofRemotely,
        proofStatus,
    } = useZkRegex();
}
```

| hook                   | type                        | arguments                 | description                                                                                                                                                                                                |
| ---------------------- | --------------------------- | ------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| googleAuthToken        | string                      | -                         |                                                                                                                                                                                                            |
| isGoogleAuthed         | boolean                     | -                         |                                                                                                                                                                                                            |
| loggedInGmail          | string                      | -                         | User's email                                                                                                                                                                                               |
| googleLogIn            | method                      | -                         | Triggers the Oauth page for users to login                                                                                                                                                                 |
| googleLogOut           | method                      | -                         | Deletes the credentials stored in local browser                                                                                                                                                            |
| createInputWorker      | method                      | pattern ID                | Creates a worker in the background that processes emails into circuit inputs. This always happens on the client side. It downloads a worker script from the registry and runs it in a sandboxed WebWorker. |
| generateInputFromEmail | method                      | pattern ID, raw email     | Returns the circuit input generated by processing the email provided                                                                                                                                       |
| generateProofRemotely  | method                      | pattern ID, circuit input | Uses the circuit input generated and queues a job. Circuit inputs are stored only before/during proof generation. This will automatically poll the server for updates.                                                                                           |
| proofStatus            | {[key:string]: ProofStatus} | -                         | A map of proof job IDs and the current status + proof outputs.                                                                                                                                             ||                             |                           |                                                                                                                                                                                                            |

```
interface ProofStatus {
    status: string;
    id: string;
    pollUrl: string;
    estimatedTimeLeft: number;
    publicOutput: any;
    proof: any;
}
```

## Example integration

The `try` page of the registry uses the SDK for proof generation.

Check it out for reference. [example](/packages/app/src/app/try/[id]/content.tsx)